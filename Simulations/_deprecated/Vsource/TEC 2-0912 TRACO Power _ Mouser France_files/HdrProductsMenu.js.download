var categories,mblCategories,MegaMenu,subCatMenu=$("#catFlyouts");$(function(){MegaMenu.init()}),MegaMenu={init:function(e){if($.extend(MegaMenu.config,e),typeof ko=="undefined")return;$("#mblMenu, #hamburgerIcon, .hdrProds, .hdrNavMenuLst1>li").on("click mouseenter focus",function(){MegaMenu.loadCategories()}),MegaMenu.setup()},setup:function(){var n,s,o,i,a,t=$("#hdrNavMenu1"),e=t.find("ul.dropdown-menu");$("#hdrNavMenu1").on("mouseenter",function(){$("#scopeOptionDiv").removeClass("BGOpen"),$("#scopeOptionDiv").removeClass("open"),typeof n=="function"&&clearTimeout(n),n=setTimeout(function(){SearchBGOverlay();var n=$(this).find(document.activeElement).length;document.activeElement!=null&&!n&&document.activeElement.blur(),e.fadeIn(400),t.find("ul").css("display","block"),$("#hdrNavMenu1 ul.dropdown-menu:hover").length<=0&&$("#navMenuH ul.dropdown-menu:hover").length<=0&&HdrFtrGa4Evts.pushEvt("top_nav_products_menu_expanded_rollover")},400)}).on("mouseleave",function(){typeof n=="function"&&clearTimeout(n),n=setTimeout(function(){t.find("ul.dropdown-menu:hover").length<=0&&$("#catFlyouts:hover").length<=0&&(e.css("display","none"),typeof subCatMenu!="undefined"&&subCatMenu.find("div.subCategoryFlyout").css("display","none"),RemoveBGOverlay())},400)}),t.on("click",function(t){"ontouchstart"in document.documentElement&&($(t.target).is("li")||$(t.target).is("li a")||$(t.target).is("li i")||$(t.target).is("span")||($("#hdrNavMenu1").hasClass("mblOpen")?(RemoveBGOverlay(),e.css("display","none"),e.find("li a").removeClass("maintainHover"),subCatMenu.find("div.subCategoryFlyout").css("display","none")):(SearchBGOverlay(),$("#hdrNavMenu1").addClass("mblOpen"),e.css("display","block"))))}),t.find("ul.dropdown-menu li a").on("click",function(){if("ontouchstart"in document.documentElement){t("ul.dropdown-menu li.catCols a").removeAttr("href"),e.css("display","block");var n=$(this).parent("li").data("submenuId");setTimeout(function(){$("#"+n).css("display","block")},400)}}),s=$(".hdrNavMenuLst1"),s.menuAim({activate:r,deactivate:c,exitMenu:d});function r(e){var i,t=$(e),r=t.data("submenuId"),n=$("#"+r),a=s.offset(),c=s.outerWidth();n.css({height:"610px",top:a.top-4,left:a.left+c}),subCatMenu.find("div.subCategoryFlyout:visible").length<=0?n.fadeIn("fast"):o=setTimeout(function(){n.fadeIn("fast")},0),n.css({display:"block"});try{i=t.attr("data-submenu-id"),i!=null&&(i=="new_prods"?HdrFtrGa4Evts.pushEvt("top_nav_products_newest_expanded_rollover"):HdrFtrGa4Evts.pushProductEvt("top_nav_products_category_second_expanded_rollover",t.children("a").attr("data-eng-cat")))}catch{}t.find("a").addClass("maintainHover"),"ontouchstart"in document.documentElement&&($("#catFlyouts").addClass("hFlyoutOpen"),SearchBGOverlay())}function c(e){clearTimeout(o);var t=$(e),n=t.data("submenuId"),s=$("#"+n);s.fadeOut("fast"),t.find("a").removeClass("maintainHover")}i=window.navigator.userAgent,a=i.search(/(MSIE|Trident|Edge)/);function l(e){for(var t=(new Date).getTime();(new Date).getTime()<t+e;);}function d(){if(a>-1){if(l(10),event==null)return!0;var e,n=event.clientX,s=event.clientY,t=document.elementFromPoint(n,s);if(t==null)return!0;for(e=t;e!=null&&e.id!="catFlyouts";)e=e.parentNode;return e==null||e.id!="catFlyouts"}return $("#catFlyouts:hover").length<=0}t.find("ul.dropdown-menu").on("mouseleave",function(){setTimeout(function(){$("#catFlyouts:hover").length<=0&&$("#hdrNavMenu1:hover").length<=0&&(e.css("display","none"),e.find("li a").removeClass("maintainHover"),subCatMenu.find("div.subCategoryFlyout").css("display","none"),RemoveBGOverlay())},200)}),$("#navMenuH ul.dropdown-menu").on("mouseenter",function(){setTimeout(function(){$("#navMenuH ul.dropdown-menu li.catCols:hover").length<=0&&RemoveBGOverlay()},401)}).on("mouseleave",function(){setTimeout(function(){$("#catFlyouts:hover").length<=0&&$("#navMenuH ul.dropdown-menu").find("a.maintainHover").removeClass("maintainHover")},200)}),$("#navMenuH ul.dropdown-menu li.catCols").on("mouseenter",function(){SearchBGOverlay()}),$("#hdrNavMenuHome a").on("mouseenter",function(){setTimeout(function(){RemoveBGOverlay()},401)}),$("#navMenuH ul.dropdown-menu li a").on("click",function(){"ontouchstart"in document.documentElement&&$("#navMenuH ul.dropdown-menu li.catCols a").removeAttr("href")}),$("#catFlyouts").on("mouseenter",function(){s.css("display")=="none"?(e.find("li a").removeClass("maintainHover"),subCatMenu.find("div.subCategoryFlyout").css("display","none")):$(".listTab a, a.img-link, a.text-link").on("click",function(){e.css("display","none"),e.find("li a").removeClass("maintainHover"),subCatMenu.find("div.subCategoryFlyout").css("display","none"),RemoveBGOverlay()})}).on("mouseleave",function(){setTimeout(function(){$("#hdrNavMenu1 ul.dropdown-menu:hover").length<=0&&$("#navMenuH ul.dropdown-menu:hover").length<=0&&(e.css("display","none"),e.find("li a").removeClass("maintainHover"),subCatMenu.find("div.subCategoryFlyout").css("display","none"),RemoveBGOverlay(),$("#navMenuH ul.dropdown-menu").find("a.maintainHover").removeClass("maintainHover"),s.trigger("mouseleave"))},200)})},loadCategories:function(){if(subCatMenu.hasClass("loaded"))return;var e="/productservice.svc/json/LwGetCategoriesForDisplay?location=LEFT_NAV&lang="+lang;$.getJSON(e,function(e){categories=e,$.each(categories,function(e,t){var n,o=MegaMenu.getEngCatName(t),s=$("#divMblSubCats div").eq(e);s!=null&&s.length>0&&(ko.applyBindings(t,s[0]),s.find(".spnTitle .spnCount").text(s.find(".spnTitle .spnCount").text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),MegaMenu.setAllCategoryLinkEvent(s,o),s.find(".subCats li").each(function(){var e=$(this);e.find(".spnCount").text(e.find(".spnCount").text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))})),n=$(".subCategoryFlyout").eq(e+1),n!=null&&n.length>0&&(ko.applyBindings(t,n[0]),n.find(".spnCount").text(n.find(".spnCount").text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),typeof strTypesOf!="undefined"&&(n.find(".kjSubCatName").text(strTypesOf.replace("{0}",n.find(".kjSubCatName").text())),n.find(".bgImg").attr("title",strTypesOf.replace("{0}",t.Name))),$.each(n.find(".twoColumns li a"),function(n,s){var a,r,i=t.Subcategories.filter(function(e){return e.Name===s.text})[0],c=(e+11)*100+n+1;try{a=typeof i.OriginalName!="undefined"?i.OriginalName:i.Name,r=o+"|"+a,$(s).attr("onclick","ga('send', 'event', 'Products Dropdown Category Click', '"+o+"', '"+a+"', "+c+");"),$(s).attr("data-eng-cat",r.toLowerCase()),$("#mbl_"+t.Id+" ul li:eq("+n+") a").attr("data-eng-cat",r.toLowerCase())}catch{}}))})}),subCatMenu.addClass("loaded")},getEngCatName:function(e){var t="";try{t=typeof e.OriginalName!="undefined"?e.OriginalName:e.Name}catch{}return t},setAllCategoryLinkEvent:function(e,t){var n=t+"|all "+t;e.find(".spnTitle a[data-bind]").attr("data-eng-cat",n.toLowerCase())}}