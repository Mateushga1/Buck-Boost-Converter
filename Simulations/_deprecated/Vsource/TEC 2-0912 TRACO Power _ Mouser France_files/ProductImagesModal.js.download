var _a,isContentLoaded=!1,isModalShown=!1,isBootstrap4Enabled=(_a=window.isBootstrap4)!==null&&_a!==void 0&&_a,CarouselImageClassSelector=isBootstrap4Enabled?".carousel-item":".item",ColXSBreakpointClassPrefix=isBootstrap4Enabled?"col":"col-xs";function openProductImagesModal(e,t,n){PreviousElement=document.activeElement||document.body,$(".productImagesModal").modal("show");var s=$(".modalLoadingImg").html();$(".productImagesModalContent").html(s),$(".modalLoadingImg").show(),imageModalOpenedEvent(t),$.ajax({type:"GET",url:e,dataType:"html",cache:!0}).done(function(e){$(".productImagesModalContent").html(e),$(".modalLoadingImg").hide(),setInitialStatus(t),setThumbnails(),setBootstrapGrid(),stopMagic360(),stopMagicZoom(),startMagic360(),startMagicZoom(),setPdpLink(n),setGaEventViewProductButton(t.getAttribute("data-gavalue")),isBootstrap4Enabled&&ResizeProductImagesModal(),$("#productImagesModal").trigger("modal:loaded")}).fail(function(){$(".productImagesModalContent").html(""),$(".modalLoadingImg").hide()})}function setPdpLink(e){e!=null?document.getElementById("linkToPdp").setAttribute("href",e):($(".linktopdp").css({display:"none"}),$(".productImagesModalLabel").css({"border-bottom":"none"}))}function setGaEventViewProductButton(e){if(e!=null&&$("#linkToPdp").length>0){var t=e.replace("Refine Product Click","Product Gallery Modal Refine Product Click");document.getElementById("linkToPdp").setAttribute("onclick",t)}}function setInitialStatus(e){var t=$(".productImagesModalContent .imageSlidesWrapper"),n=t.find(".carousel-inner "+CarouselImageClassSelector).length;n===1&&t.find(".carousel-control").remove(),e.classList.contains("defaultSpinThumbnail")?($(".productImagesModalContent .spinThumbnail").addClass("active"),t.find(".carousel-inner "+CarouselImageClassSelector+"[data-index=0]").addClass("active")):($(".productImagesModalContent .navThumbnail:first").addClass("active"),t.find(".carousel-inner "+CarouselImageClassSelector+"[data-index=1]").addClass("active"))}function setBootstrapGrid(){var t=$(".productImagesModalContent .imageSlidesWrapper"),e=$(".productImagesModalContent .thumbnailsWrapper"),n=e.find(".navThumbnail").length,s=$(".productImagesModalContent .spinContainer");n<5?(t.addClass(ColXSBreakpointClassPrefix+"-12 col-sm-12 col-md-10 col-lg-10"),e.addClass(ColXSBreakpointClassPrefix+"-12 col-sm-12 col-md-2 col-lg-2")):(t.addClass(ColXSBreakpointClassPrefix+"-12 col-sm-12 col-md-9 col-lg-9"),e.addClass(ColXSBreakpointClassPrefix+"-12 col-sm-12 col-md-3 col-lg-3")),s.length?(e.find(".spinContainer").addClass("col-sm-3 col-md-12 col-lg-12"),e.find(".navThumbnailsContainer").addClass("col-sm-9 col-md-12 col-lg-12")):e.find(".navThumbnailsContainer").addClass("col-sm-12 col-md-12 col-lg-12")}function setThumbnails(){var o,t=$(window).width(),s=$(".productImagesModalContent .navThumbnails"),e=$(".productImagesModalContent .navThumbnails .navThumbnail"),n=$(".productImagesModalContent .spinContainer");t<600?(n.addClass(ColXSBreakpointClassPrefix+"-4"),e.addClass(ColXSBreakpointClassPrefix+"-4")):(n.removeClass(ColXSBreakpointClassPrefix+"-4"),e.removeClass(ColXSBreakpointClassPrefix+"-4")),t>=600&&t<768?(n.addClass(ColXSBreakpointClassPrefix+"-3"),e.addClass(ColXSBreakpointClassPrefix+"-3")):(n.removeClass(ColXSBreakpointClassPrefix+"-3"),e.removeClass(ColXSBreakpointClassPrefix+"-3")),t>=768&&t<992?(n.addClass("col-sm-3"),e.addClass("col-sm-3")):(n.removeClass("col-sm-3"),e.removeClass("col-sm-3")),t>=992?(o=e.length,o>4&&s.css({display:"flex","flex-wrap":"wrap","flex-direction":"row"}),e.css("margin-right","13px")):(s.removeAttr("style"),e.css("margin-right","0"))}function setBadgeAndTextBreakpoint(){var e=$(window).width();e<771?$(".visibleOnDekstopResize").css({display:"none"}):$(".visibleOnDekstopResize").removeAttr("style")}function startMagic360(){var t,n,s,e=$("#spin360Viewer");e.addClass("Magic360"),updateHintTexts(),t=5,e.on("mousedown",function(e){n=e.pageX,s=e.pageY}),e.on("mouseup",function(e){var o=Math.abs(e.pageX-n),i=Math.abs(e.pageY-s);(o>t||i>t)&&ga("send","event","Product Gallery Modal Interaction","360 Drag","Drag")});function i(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)}function o(){for(var n,t=document.querySelectorAll?document.querySelectorAll("img.lazy-image"):document.getElementsByClassName("lazy-image"),e=t.length-1;e>=0;e--)n=t[e].getAttribute("data-src"),n&&!t[e].getAttribute("src")&&i(t[e])&&(t[e].setAttribute("src",n),t[e].setAttribute("data-src",""))}window.addEventListener?window.addEventListener("scroll",o,!1):window.attachEvent("onscroll",o),Magic360.start()}function startMagicZoom(){var e=$(".productImagesModalContent").find('[id^="zoomViewer_"]');e.addClass("MagicZoom"),e.each(function(){var e=$(this).attr("id");MagicZoom.start(e),$(this).on("focus",function(){$(this).on("keydown",function(t){switch(t.keyCode){case 13:MagicZoom.expand(e),t.preventDefault();break;case 187:MagicZoom.zoomIn(e),t.preventDefault();break;case 189:MagicZoom.zoomOut(e),t.preventDefault();break}})})})}function stopMagic360(){Magic360.stop();var e=$("#spin360Viewer");$(".productImagesModalContent").off("keydown"),e.removeClass("Magic360")}function stopMagicZoom(){var e=$(".productImagesModalContent").find('[id^="zoomViewer_"]');e.each(function(){var e=$(this).attr("id");MagicZoom.stop(e)}),e.removeClass("MagicZoom")}function updateHintTexts(){var e=$(window).width(),t=$("input:hidden[name=spinHintText]").val(),n=$("input:hidden[name=mobileSpinHintText]").val();e<992?Magic360Lang={"mobile-hint-text":n}:Magic360Lang={"mobile-hint-text":t}}$(window).on("resize",function(){setThumbnails(),setBadgeAndTextBreakpoint()});function thumbnailNavigation(e){$(".spinContainer").find(".spinThumbnail").removeClass("active"),$(".spinContainer").find(".spinThumbnailLink[data-index='"+e.getAttribute("data-index")+"']").parent().addClass("active"),$(".navThumbnails").find(".navThumbnail").removeClass("active"),$(".navThumbnails").find(".thumbnailLink[data-index='"+e.getAttribute("data-index")+"']").parent().addClass("active"),$(".carousel-inner").find(""+CarouselImageClassSelector).removeClass("active"),$(".carousel-inner").find(CarouselImageClassSelector+"[data-index='"+e.getAttribute("data-index")+"']").addClass("active"),thumbnailClickedEvent(e)}function bindProductImagesModal(){$(".productImagesModal").on("shown.bs.modal",function(){$(".productImagesModalContent").trigger("focus")}),$(".productImagesModal").on("hidden.bs.modal",function(){$(".productImagesModalContent").html(""),$(".modalLoadingImg").hide(),PreviousElement&&PreviousElement.focus()}),$(".productImagesModal").on("click",function(e){e.target===e.currentTarget&&(ga("send","event","Product Gallery Modal Interaction","Close","Outside Modal"),PreviousElement&&PreviousElement.focus())}),$(".productImagesModal").on("slide.bs.carousel",function(e){var n=$(e.relatedTarget),t=parseInt(n.attr("data-index"));$(".spin").length&&($(".spin").find(".spinThumbnail").removeClass("active"),$(".spin").find(".spinThumbnailLink[data-index='"+t+"']").parent().addClass("active")),$(".navThumbnails").find(".navThumbnail").removeClass("active"),$(".navThumbnails").find(".thumbnailLink[data-index='"+t+"']").parent().addClass("active")})}function imageModalOpenedEvent(e){var t,n,o,s="";e.classList.contains("img-link")?s="Big Image":e.classList.contains("defaultSpinThumbnail")?s="360 Image":e.classList.contains("plusMoreImagesText")&&(s="Plus Images Link"),t="",n=0,$("a#imglink").length&&(t+="Big Image|",n+=1),$("a.defaultSpinThumbnail.thumbControls").length&&(t+="360 Image|",n+=1),$("a#plusMoreImagesText").length&&(t+="Plus Images Link|",o=$("a#plusMoreImagesText").text(),n+=parseInt(o.substr(o.indexOf("+"),o.indexOf("images")).trim())),t=t.substr(0,t.length-1),ga("send","event","Product Gallery Modal Open",s,t,n)}function thumbnailClickedEvent(e){var t,n="Static";e.classList.contains("spinThumbnailLink")&&(n="360"),t=parseInt(e.getAttribute("data-index")),$("a.spinThumbnailLink").length&&(t+=1),ga("send","event","Product Gallery Modal Thumbnail Click",n,t.toString(),t)}function onMagic360Ready(){var e=this;$(".productImagesModalContent").on("keydown",function(e){switch(Magic360.pause("spin360Viewer"),e.keyCode){case 37:Magic360.spin("spin360Viewer",1),e.preventDefault();break;case 38:Magic360.jump("spin360Viewer",-1),e.preventDefault();break;case 39:Magic360.spin("spin360Viewer",-1),e.preventDefault();break;case 40:Magic360.jump("spin360Viewer",1),e.preventDefault();break;case 187:Magic360.magnifyOn("spin360Viewer"),e.preventDefault();break;case 189:Magic360.magnifyOff("spin360Viewer"),e.preventDefault();break}}),$(".productImagesModalContent").on("focus",function(){$(e).trigger("keydown")})}function ResizeProductImagesModal(){$(".productImagesModal .modal-content").css("max-height",$(window).outerHeight()-50+"px")}function BindProductImagesModalAccessible(){var e,t;$(document).on("shown.bs.modal","#productImagesModal",function(e){isModalShown=!0,isModalShown&&isContentLoaded&&$(e.target).trigger("asnyc:modal:ready")}),$(document).on("modal:loaded","#productImagesModal",function(e){isContentLoaded=!0,isModalShown&&isContentLoaded&&$(e.target).trigger("asnyc:modal:ready")}),$(document).on("asnyc:modal:ready","#productImagesModal",function(n){e=$(n.target).find('button:visible, [href], a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])'),t=document.activeElement,e&&e.length>0&&e[0].focus()}),$(document).on("hidden.bs.modal","#productImagesModal",function(){isContentLoaded=!1,isModalShown=!1,t&&t.focus()}),$(document).on("keydown","#productImagesModal",function(t){var n,s,o=9;e&&e.length>0&&(n=e[0],s=e[e.length-1],t.keyCode===o&&(t.shiftKey?document.activeElement===n&&(s.focus(),t.preventDefault()):document.activeElement===s&&(n.focus(),t.preventDefault())))})}$(document).ready(function(){bindProductImagesModal(),BindProductImagesModalAccessible(),Magic360Options={onready:onMagic360Ready}})